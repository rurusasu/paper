# Abst
CAD／CAMシステムを用いた設計・製造工程において、各種NC工作機械の数値制御（NC）データを最終的に生成するための中間データとして、一般的にCLS（Cutter Location Source）データが使用されている。一般的なCLSデータには、主に切削工具の位置や向きを指定するためのGOTO文が含まれている。しかし、産業用ロボットやメカトロニクスシステムでは、エンドエフェクタやカメラシステム、ビジュアルフィードバックコントローラ、畳み込みニューラルネットワーク（CNN）のようなAIシステムを扱うための特別な記述やカスタマイズされた記述は、このような標準化されたCLSデータではサポートされていない。

本論文では、このような生産ラインの自動化に必要な拡張機能に対応するために、デスクトップサイズの多関節ロボットのためのハイパーカッター・ロケーション・ソース（HCLS）データとその制御インターフェースを紹介する。HCLSデータには、グリッパー制御、関節選択、線形補間、カメラスナップショット制御、AIによる物体の姿勢推定、ピッキング対象物への接近のためのビジュアルフィードバック制御などの拡張数値コマンドを含めることができる。提案手法の有効性は、DOBOT Magicianと名付けられた4自由度の小型多関節ロボットを用いたピック＆プレース実験により実証されました。

# 1. 緒言

多関節型やスカラ型の産業用ロボットは、多くの工業製品の生産ラインに導入されている。最近では、例えばPiotrとKrzysztofが発表したシステムでは、複数のロボットを用いた歯車の生産工程の自動化を物理的にシミュレーションすることができました。Avanzato氏は、大学の講義の一環として、MATLAB Robotics Systems ToolboxとDOBOT Magicianと名付けられたROS対応のロボットアームを使った実験演習を開発しました。ロボットを製造業で使用する場合、ティーチングデータの作成は、ティーチングペンダントを用いたオフラインでのロボットプログラミングが一般的である。プログラムによるオフライン制御も可能だが、ロボットメーカー固有の言語を使用しなければならず、汎用性に欠けることになる。

これらの問題に対処するために、ロボットアプリケーションを設計や製造プロセスで使用されるCAD/CAMシステムと統合する試みがなされている。例えば、JohannesとSigridは、Rhinoceros用のKUKA Robot Languageプラグインを開発し、製造業向けの商用3D CADソフトウェアとの親和性を高めた[Johannes-2011]。永田らは、ロボット言語を使わずに、一般的なCAD/CAMシステムで標準的に生成できるツールパスであるCLS（Cutter Location Source）データに応じてロボットを制御するシステムを提案している。PedroとNunoは、一般的な3次元CADパッケージ上で動作するCAD図面からロボットをオフラインでプログラミングできるアプリケーションを提案しました。ロボット研削システムでは、Shenshunらが、NG NX3で作成したCNC G-Codeプログラムを、安川電機製ロボット用のMotomanプログラムに変換するシステムを開発しました。このように、CADシステムとのロボットインターフェースはある程度提供されているが、AIシステムやVF（Visual Feedback）コントローラとの連携はまだ確立されていないようである。

今回使用したデスクトップサイズの多関節ロボット「DOBOT Magician」を図でご紹介します。Table ″magician_param″はこのロボットの仕様を示しています。一般的な産業用ロボットの6自由度に比べ、4自由度しかありませんが、ユーザーフレンドリーなティーチングインターフェースと、キネマティクスやサーボ制御などの豊富なAPI機能を備えており、エンジニアがカスタマイズした新しいアプリケーションを開発できることが特徴です。筆者らは、畳み込みニューラルネットワーク（CNN）とビジュアルフィードバック制御を応用して、DOBOTをベースとしたロボットシステムを開発し、ターゲットとなる記事の姿勢を考慮したピック＆プレースタスクを実行した。このシステムでは、ロボットがテーブル上のワークを視覚的に認識し、ピックすることができます。しかし、MATLABで書かれた命令文は、作業内容の変更や修正に応じて書き換えなければならないという問題があります。そこで著者らは，オリジナルのティーチングデータに含まれるMOVJやMOVLなどの必須機能だけでなく，VF制御のためのVF_CONTROLやカメラ制御のためのSNAPSHOTなど，新たに定義された高度なコマンドを記述することができるHCLS (Hyper Cutter Location Source) データを提案する．HCLSデータは、従来のティーチング＆プレイバック型の産業用ロボットの機能や使い勝手を向上させることが期待されます。その効果を実験で示す。

# 2. スモールクリアランスでのピックアンドプレースタスクの予備実験

ここでは，ロボットの基本性能を評価するための予備実験として，クリアランスの小さいピック＆プレースタスクを実施した。小型の産業用ロボットは、大手産業用ロボットメーカーから様々なものが提供されている。しかし、それらのロボットは非常に高価であり、中小規模の製造業が複数台購入することは容易ではない。本研究では、まず、研究室の学生9名による実験で、図のような卓上型4自由度ロボットの基本的なピックアンドプレース性能を評価しました。実際に実験を行ってみると、剛性の低さからくる振動の問題に悩まされることが多々ありました。特に、ワークを把持した状態で、アーム先端に取り付けられたグリッパーを左右または前方向に伸ばしきったときに発生します。

このような背景から、クリアランス0.7mmという小さな条件でのピック＆プレース作業を通して、ロボットの実際の性能を評価する実験を行いました。図❶は、プラスチック製の治具と円筒形の樹脂成形品で構成された例です。ジグには、直径8mmの穴が7mm間隔で10個並んでいる。成形品の直径は7.3mmです。

ティーチングの過程では、9人の学生が同じ種類の9台のロボットを使って個別にティーチングを行い、異なる9つのティーチングファイルを作成しました。ティーチングでは、ティーチングポイントを細かく設定するだけでなく、グリッパーの開閉の一時停止時間を調整しました。ティーチングには、深圳岳江科技有限公司が提供するDobotStudio-V1.9.4を使用しました。図❶は、9人の学生が行ったピックアンドプレース実験の一例です。