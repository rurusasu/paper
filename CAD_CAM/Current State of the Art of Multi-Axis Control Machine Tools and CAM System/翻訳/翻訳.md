# Current State of the Art of Multi-Axis Control Machine Tools and CAM System

# 2. Multi-Axis Control Machining

複雑な形状のワークを作るためには、空間の任意の点に、任意の姿勢で切削工具を配置する必要があります。そのためには6軸、すなわち6自由度が必要となる。そこで、NC工作機械には、図2に示すように、位置決めのためのX軸、Y軸、Z軸の3つの並進移動機能と、X軸周りのA、Y軸周りのB、Z軸周りのCの3つの回転移動機能を持たせることができる。3軸制御の工作機械の多くは、3つの並進運動機能を持っている。多軸制御の工作機械は、3つ以上の移動機能を持つ工具である。一般的に、Z軸は工具の主軸に沿った軸である。エンドミルやボールエンドミルなどの回転切削工具を使用する場合は、Z軸の制御はできない。このように、回転切削工具を使用する場合は、5軸制御が必要かつ十分な条件となる。回転しない切削工具を使用する場合は、6軸制御が必要となる。制御軸数と回転工具、非回転工具の動きの関係を図3、図4に示す。



# 3. CAM System for Multi-Axis Control Machining

多軸制御加工用のCAMシステムを図5に示す。このシステムは通常、メインプロセッサーとポストプロセッサーの2つのプロセッサーで構成されている。

**メインプロセッサーの役割は、部品や製品の3次元CADデータをもとに、衝突のないカッターロケーション（CL）データを生成することである。CLデータは、任意の切削位置における工具と工具軸ベクトルの位置を示すもので、CAD座標系を基準にして定義される。したがって、CLデータは5軸制御マシニングセンタや5軸制御複合加工機の構造には関係しない。** 工具とワークの衝突が発生した場合、特に多軸制御加工では非常に重要な衝突回避が行われ、正しく加工が行われる。

ポストプロセッサーは、CLデータをもとに、5軸制御の工作機械を動かすためのNCデータを生成する重要な役割を担っています。ポストプロセッサーは、5軸工作機械の構造や切削条件を考慮して、実用的なNCデータを生成します。

CAD座標系から機械座標系への座標変換は、過削や不足削を防ぐための「リニアライズ」や、どの切削位置でも切削速度や送り速度を一定に保つための「切削速度制御」「送り速度制御」などを考慮して行う。

# 4. Collision-Free Tool Path Generation

工具とワークとの衝突の可能性。衝突を回避するためには、衝突が回避されるまで工具の姿勢を仮決定することを繰り返すという試行錯誤が必要です。市販の5次元CAMでは、このような衝突回避の方法が一般的なようです。この方法では，衝突しない姿勢の中から，なぜその姿勢が選択されたのかを知る方法がありません．また，得られた工具姿勢に不満があっても，工具姿勢を修正する方法もありません．

また，工具形状の内外判定を利用した衝突チェック法が提案されている[2]．この方法では，図6に示すように，工具の円周方向と長手方向にチェックポイントを指定して工具形状を近似する高速加工を行う．チェックポイントがワーク内に存在するかどうかを調べることで衝突チェックを行う。衝突した場合には，衝突回避ベクトル$\bm{D}$を求めて切削点での工具姿勢を変更する．衝突回避ベクトル$\bm{D}$は以下のようにして求める．


# 5. Transformation of CL Data to NC Data by Post-Processor

前述したように、メインプロセッサは、ワークの3次元CADデータを基に、ワーク座標系で衝突のないCLデータを生成する。3次元CADで生成されたCLデータは、実際の工作機械の構造とは無関係であり、NCデータに変換しなければ加工に使用することができない。このCLデータから工作機械用のNCデータへの変換を行うのがポストプロセッサーである。ポストプロセッサの役割は、実際の工作機械の構造を考慮して、実際のNCデータを生成することです。

図12は、3つの並進軸と、回転と傾斜の2つの回転運動からなる5軸制御マシニングセンタの代表的な構造を示したものである。この図が示すように、2つの回転動作ユニットの配置によって、主にテーブルチルティング構造（タイプ1、2）、スピンドルチルティング構造（タイプ3、4）、スピンドル＆テーブルチルティング構造（タイプ5、6）の3つに分類される。

このタイプ1の構造を用いて、ワーク座標系（WCS）のX軸、Y軸、Z軸の方向と機械座標系（MCS）の方向が等しいと仮定して、CLデータからNCデータへの変換[9]を簡単に説明する。まず，MCSでは切削工具を装着した主軸の方向をZ軸と定義しているため，工具軸がZ軸に対応するようにテーブルの回転角rとiを決定する。すると，図13（a）に示すように，回転移動後のWCSでの工具中心点Pの座標値は，MCSではPになる。この回転移動をMCSで考えると，図13(b)に示すように，Y Z平面内の原点からのi軸の差ベクトルとMCS内の原点の位置ベクトルをそれぞれSi，Saとする。そして、PとPの関係は以下の式で与えられる。