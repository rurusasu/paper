# Rapid extraction of machined surface data through inverse geometrical solution of tool path information


# Abstract
過去数十年の間に，5軸ミルサイクルのシミュレーション用にいくつかのプロセスモデルが開発され，そのシミュレーション結果はパラメータの選択やプロセスの改善に利用されてきた．しかし，プロセスモデルをミリングサイクルに統合することは，特に5軸自由曲面加工における工具経路の修正を目的とする場合には，簡単な作業ではありません．これは主に、工具経路の修正には、加工された面の情報（面の位置と面の法線ベクトル）が必要であるという事実に起因しています。しかし，この情報は工具経路，すなわちCLS（cutter location source）ファイルに明示的に与えられていない．本論文では，既に生成されているCLSファイルから直接，表面位置と表面法線ベクトルを解析的に計算する，新規かつ実用的なアプローチを提案する．提案された手法を代表的な5軸ミル加工サイクルに適用し，その結果をCADモデルと比較して検証した．その結果，提案手法は，工具経路ファイル中のカッター位置点の密度に応じて，適切な精度で加工面データを計算できることが示された．

# Introduction

5軸ミルは、航空宇宙、金型、自動車などの自由曲面の加工に広く使用されており、高い輪郭加工能力が求められます。ボールエンドミルは、工具をワークの表面に対してほぼあらゆる角度に向けることができるため、輪郭加工の要件を満たすために使用されています（工具を先行させたり、傾けたりすることができます）。一般的に、5軸ボールエンドミルは加工能力を向上させますが、5軸の工具動作により、フラットエンドミルに比べて切削プロセスが複雑になります。つまり，工具軸方向に連続的に変化する噛み合い境界や切削条件が，特に工具のボールエンド部分で発生するのである。さらに、表面の自由な形状のため、表面の位置、表面の法線、曲率などの表面の特性は、工具経路に沿って変化します。

既知の切削条件における切削抵抗[1-5]，工具のたわみ[6,7]，プロセスダイナミクス[8-10]をシミュレートするために，5軸ミル加工のプロセスモデリングが盛んに行われている．このようなシミュレーションは一般に，生産性を向上させるためのプロセスパラメータの選択に用いられる．最近では，プロセスモデルを工具経路情報と統合して，ミリングサイクルに沿ったプロセスシミュレーションを行うようになってきました [11]．このようなシミュレーションでは，工具の位置をカッタ ー・ロケーション・ソース（CLS）ファイルから取得し， 工具エンベロープとワークの粗い形状を使用してかみ合い 境界を決定します．また，シミュレーション結果は，工具経路のオフセットや工具軸の最適化など，工具経路の修正に使用することができます．

工具のたわみを補正するための工具経路のオフセットは，主に使用される工具経路修正技術の1つであり[12-17]，工具の位置を加工面法線に沿って工具のたわみの分だけ移動させる．2 1/2軸フラットエンドミル加工では、工具経路ポイントが同一平面上にあり、工具軸が加工面法線に垂直または平行であるため、工具経路が工具軸に垂直な平面内で補正されるので、これは比較的容易です[12-15]。一方，5軸自由曲面加工では，工具軸がリード角とチル角を介して加工面法線に対して配向しており，切削工具の軌跡，工具のたわみ，加工面法線が3次元空間に存在する[18]。そのため，表面位置点か表面法線ベクトルのどちらかが既知である必要がある．しかし，表面法線ベクトルと表面位置点は工具経路ファイルに含まれていないため，これらの情報をCLSファイルから取得して工具経路を自動修正する必要があり，反復的な工具経路生成の必要性を排除または最小限に抑えることができる．

一般に，5軸ミル加工における工具経路の生成は，主に3つのステップで行われる[18]．まず，加工する表面を公差設定に応じた数のポイントに離散化することで，カッターコンタクト（CC）ポイントを特定する．次に，表面の法線ベクトルにリード角とチルト角の量による回転変換を適用して，工具軸を算出する．最後に、カッターの接触点から、表面の法線と工具軸のベクトル加算に工具の球面半径を乗じて、カッターロケーション（CL）ポイントを求めます。これらのステップを通して、必要な幾何学的情報、すなわち表面の法線とカッターの接触点は、CADモデルから得られます。そのため、工具経路をさらに修正するには、表面の法線ベクトルやカッターの接触点を知る必要がありますが、これらはCLSファイルでは明示的に与えられていません。その結果、CLSファイルを介して工具経路を修正するためにプロセスシミュレーションを使用することは、ほとんど不可能または非常に限定されたものとなる。そのため、一般的には、CAM（Computer-Aided Manufacturing）環境で工具経路を局所的に修正します。

工具軸の計算は、5軸ミル加工における最も重要な課題の1つです。現在。CAMパッケージでは，工具軸ベクトルを計算する際に，ワークの形状，工具とワークの衝突，滑らかさなど，5軸ミル加工の幾何学的な側面のみを考慮しています．幾何学的な制約に基づいた工具軸ベクトルの最適化に関する研究はいくつかあります[19-23]。しかし，5軸ミル加工のプロセスメカニクスとダイナミックスを改善するためには，好ましい工具軸ベクトルがあるかもしれないことが示されているので，プロセスメカニクスとダイナミックスを工具軸の計算に入れることも重要である．Limら[24]は，タービンブレードの5軸フライス加工における様々な工具の方向性の影響を実験的に調査した．彼らは，主に4つの切削方向と15°のリード/チルト角の組み合わせを適用し，「チルト角をつけた水平方向の内向き」戦略の適用が有利であると結論づけている．Ozturkら[25]は，工具軸（リード角とチルト角）がプロセスの力学と動力学に及ぼす影響に関する初期のシミュレーション研究の1つとして，好ましい工具軸が切削深さとステップオーバーに依存することを示した．彼らは，工具先端の接触を避けるための条件や，リード角とチルト角が切削力の形状誤差やびびりの安定性に及ぼす影響を，プロセスシミュレーションによって研究した．最近の研究では，Yigit と Lazoglu [26] が，柔軟性のある部品の 5 軸ボールエンドミル加工におけるリード角と傾斜角の影響を研究した．この研究では，切削力，トルク，部品の振動，表面品質を考慮して，工具軸選択のための効果的な戦略を提案しています．シミュレーションの結果は、加工実験によって検証されています。これらの研究では，好ましい工具軸があることが強調されている．